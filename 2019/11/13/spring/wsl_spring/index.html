<!DOCTYPE html><html lang="ja"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta http-equiv="X-UA-Compatible" content="chrome=1"><meta name="renderer" content="webkit|ie-comp|ie-stand"><meta name="referrer" content="no-referrer"><meta name="theme-color" content="#333333"><meta name="mobile-web-app-capable" content="yes"><meta name="google" content="notranslate"><meta name="format-detection" content="telephone=no"><meta name="keyword" content="Web, Js, CSS, .NET Core, C#, ASP.NET Core MVC, Docker"><meta name="description" content="書きたいことを書くだけ"><title>キレイなSpring Bootの開発環境を構築する(WSL + Proxy + vscode) - dongsuの技術Blog</title><base href="/"><link rel="preconnect" href="//cdnjs.cloudflare.com"><link rel="manifest" href="/manifest.json"><link rel="shortcut icon" href="/icons/icon-72x72.png"><link rel="apple-touch-icon" href="/icons/icon-192x192.png"><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.9/styles/atom-one-light.min.css"><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.9/styles/atom-one-dark.min.css" media="screen and (prefers-color-scheme:dark)"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-148723572-1"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-148723572-1")</script><script data-ad-client="ca-pub-6171463180373492" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><link rel="stylesheet" href="/styles/sanitize.css"><link rel="stylesheet" href="/styles/cold-stone.css"><noscript><p class="text-center">你的浏览器还没开启 Javascript 功能！</p></noscript><link rel="alternate" href="/atom.xml" title="dongsuの技術Blog" type="application/atom+xml"></head><body><main class="main wrapper"><article class="article slide-in-right"><section><h1 class="article-title">キレイなSpring Bootの開発環境を構築する(WSL + Proxy + vscode)</h1><p class="article-meta"><span class="meta-info"><span>更新日時&#58;<time class="post-time" datetime="2019-11-13">2019-11-13</time> </span><span>閲覧時間&#58; 3 min</span> <span class="hide" id="busuanzi_container_page_pv">閲覧回数&#58; <span id="busuanzi_value_page_pv"></span></span> </span><a class="meta-link hover-underline-animation" id="back">前へ</a></p></section><section class="article-content"><p>Spring Bootの学習にあたって、最初の難関は開発環境の構築なり。</p><p>悲しきかな、社内の認証プロキシが絡むと難易度が更に増し、あまたの初心者はそこで躓き、そして散っていった。</p><p>我、それを救いべく、構築手順をここに記す！！</p><h2 id="前提"><a href="#前提" class="headerlink" title="前提"></a>前提</h2><ol><li>WSL環境が構築済みであること。まだの人は<a href="https://dongsu.dev/2018/08/01/other/wsl-proxy/">ここ</a>を参考にしてみてください</li><li>Windows側にVisual Studio Codeがインストール済みであること</li><li>Visual Studio Codeの拡張機能に<a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-wsl" target="_blank" rel="noopener">Remote - WSL</a>インストール済み</li></ol><h3 id="IDE"><a href="#IDE" class="headerlink" title="IDE"></a>IDE</h3><p>Java開発のIDEと言えば、EclipsseかIntellijですが、私はあえてVisual Studio Codeをおすすめします。<br>理由は以下です。</p><table><thead><tr><th>IDE</th><th>機能</th><th>価格</th><th>所感</th></tr></thead><tbody><tr><td>Eclipse</td><td>△</td><td>無料</td><td>フリーのIDEで使えるだけ有り難いですが、インテリセンスが遅くてちょっとイライラします。もちろんカスタマイズ次第どうにでもなりますが、初心者向ではありません。</td></tr><tr><td>Intellij</td><td>◎</td><td>高い</td><td>流石に年間10万円もするのIDEであって機能は申し分ない。これを使ってるだけでコーディング速度が1.5倍増し。いかんせん高い・・・自腹で買うのはかなり躊躇します。</td></tr><tr><td>Visual Studio Code</td><td>◯</td><td>無料</td><td>テキストエディッタの皮を被ったIDE、オープンソースで開発者が多く、拡Javaの張機能も充実しています。 何より無料。</td></tr></tbody></table><h2 id="WSLの設定"><a href="#WSLの設定" class="headerlink" title="WSLの設定"></a>WSLの設定</h2><p>Ubuntuのアプリケーションを起動し、WSL環境で以下のコマンドを実行します。</p><h3 id="WSLでJdkをインストール"><a href="#WSLでJdkをインストール" class="headerlink" title="WSLでJdkをインストール"></a>WSLでJdkをインストール</h3><pre><code class="bash">## プロキシをOnに設定
proxy_on

## openjdk-11をインストール
 sudo -E apt install openjdk-11-jdk-headless -y</code></pre><h3 id="WSL側のVisual-Studio-Codeの拡張機能をインストール"><a href="#WSL側のVisual-Studio-Codeの拡張機能をインストール" class="headerlink" title="WSL側のVisual Studio Codeの拡張機能をインストール"></a>WSL側のVisual Studio Codeの拡張機能をインストール</h3><p>WSL環境側のVisual Studio Codeをコマンドラインで起動します。</p><pre><code class="bash">code</code></pre><p>以下３つの拡張機能を<strong>WSL側に</strong>インストールします。</p><p><strong>Install on WSL:Ubuntu</strong>を押下</p><p><img src="/images/spring/wsl_spring/2019-11-13-13-12-00.png" alt></p><p><img src="/images/spring/wsl_spring/2019-11-13-13-12-25.png" alt></p><p><img src="/images/spring/wsl_spring/2019-11-13-13-12-51.png" alt></p><h3 id="WSL側のVisual-Studio-CodeのProxyを設定"><a href="#WSL側のVisual-Studio-CodeのProxyを設定" class="headerlink" title="WSL側のVisual Studio CodeのProxyを設定"></a>WSL側のVisual Studio CodeのProxyを設定</h3><p>社内プロキシ環境の場合、WSL側でSpringのプロジェクトを作成するときにエラーが発生します。<br>WSL側のVisual Studio CodeのProxy設定を下記のように行います。</p><p><img src="/images/spring/wsl_spring/2019-11-13-13-17-51.png" alt></p><h3 id="MavenのProxy設定"><a href="#MavenのProxy設定" class="headerlink" title="MavenのProxy設定"></a>MavenのProxy設定</h3><p>社内認証プロキシの場合、Spring Boot のプロジェクト作成時にMavenからモジュールをダウンロードする際に、以下の設定が必要です。</p><p>WSL環境で以下のコマンドを実行します。</p><pre><code class="bash">## .m2/settings.xmlを編集、なければ新規作成
code ~/.m2/settings.xml</code></pre><p>settings.xmlの中身</p><pre><code class="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;settings xmlns=&quot;http://maven.apache.org/SETTINGS/1.0.0&quot;
          xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
          xsi:schemaLocation=&quot;http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd&quot;&gt;
      &lt;proxies&gt;
          &lt;proxy&gt;
              &lt;id&gt;proxy-http&lt;/id&gt;
              &lt;active&gt;true&lt;/active&gt;
              &lt;protocol&gt;http&lt;/protocol&gt;
              &lt;host&gt;proxy_server&lt;/host&gt;
              &lt;port&gt;8080&lt;/port&gt;
              &lt;username&gt;username&lt;/username&gt;
              &lt;password&gt;password&lt;/password&gt;
          &lt;/proxy&gt;
          &lt;proxy&gt;
              &lt;id&gt;proxy-https&lt;/id&gt;
              &lt;active&gt;true&lt;/active&gt;
              &lt;protocol&gt;https&lt;/protocol&gt;
              &lt;host&gt;proxy_server&lt;/host&gt;
              &lt;port&gt;8080&lt;/port&gt;
              &lt;username&gt;username&lt;/username&gt;
              &lt;password&gt;password&lt;/password&gt;
          &lt;/proxy&gt;
      &lt;/proxies&gt;
  &lt;/settings&gt;</code></pre><h2 id="Spring-Bootのプロジェクト作成"><a href="#Spring-Bootのプロジェクト作成" class="headerlink" title="Spring Bootのプロジェクト作成"></a>Spring Bootのプロジェクト作成</h2><p>WSL側のVisual Studio Codeで<code>ctrl + shift + p</code>でSpring Initializrを起動し、下記の図のようにプロジェクトを作成します。</p><p><img src="/images/spring/wsl_spring/2019-11-13-13-26-00.png" alt></p><p><img src="/images/spring/wsl_spring/2019-11-13-13-27-51.png" alt></p><p><img src="/images/spring/wsl_spring/2019-11-13-13-28-12.png" alt></p><p><img src="/images/spring/wsl_spring/2019-11-13-13-28-40.png" alt></p><p><img src="/images/spring/wsl_spring/2019-11-13-13-29-47.png" alt></p><p>Windows側でもプロジェクトフォルダを参照できるように、プロジェクトの作成場所を<code>/mnt/</code>配下にすることをオススメします。</p><p><img src="/images/spring/wsl_spring/2019-11-13-13-30-15.png" alt></p><p>作成完了したら、プロジェクトを新たしいWindowでOpenしましょう。</p><p><img src="/images/spring/wsl_spring/2019-11-13-13-31-22.png" alt></p><p>プロジェクト配下の<code>.mvn</code>フォルダ配下に<code>jvm.config</code>ファイルを作成し、Proxy設定を行います。</p><p><img src="/images/spring/wsl_spring/2019-11-13-16-33-38.png" alt></p><ul><li>設定情報</li></ul><pre><code class="config">-Dhttp.proxyHost=proxy.hoge.co.jp
-Dhttp.proxyPort=8080
-Dhttp.proxyUser=uer001
-Dhttp.proxyPassword=hogepass
-Dhttps.proxyHost=proxy.hoge.co.jp
-Dhttps.proxyPort=8080
-Dhttps.proxyUser=uer001
-Dhttps.proxyPassword=hogepass
-Djdk.http.auth.tunneling.disabledSchemes=</code></pre><p>あとはSpring-Boot Dashbord上でアプリケーションを起動・デバッグして動作確認してみてください。</p><h2 id="まとめ"><a href="#まとめ" class="headerlink" title="まとめ"></a>まとめ</h2><p>以上がWSLでのSpring Boot開発環境構築手順でした。</p><p>WSLの一番のメリットは例え環境が壊れても、WSLをリセットして再びコマンドを実行すれば環境がすぐに復元できることです。</p><p>私は自分のPCをなるべく汚したくない人なので、最近は<code>.NET</code>の開発はホストのWindows機、他の言語(Java,Python)はWSLでするようにしています。</p><h2 id="最後に"><a href="#最後に" class="headerlink" title="最後に"></a>最後に</h2><p>一つだけご注意ください。</p><p><strong>Proxy設定のユーザーパスワードをファイルに直に書いていますので、パスワード変更になったら設定したファイルを変更する必要があります</strong></p></section></article><section class="prev-next card slide-in-right"><a href="/2019/11/18/other/wsl_docker_jenkins/" class="link prev" title="WSL + Docker + Jenkins + Proxyの地雷を解決する"><span class="hover-underline-animation">&larr; WSL + Docker + Jenkins + Proxyの地雷を解決する</span> </a><a href="/2019/11/12/asp_net_core_mvc/TieredArchitecture/chap4/" class="link next" title="ASP.NET Core MVC 階層化アーキテクチャ Chap4 (データアクセスオブジェクトを抜き出しModel層を作成する)"><span class="hover-underline-animation">ASP.NET Core MVC 階層化アーキテクチャ Chap4 (データアクセスオブジェクトを抜き出しModel層を作成する) &rarr;</span></a></section><section class="article-toc"><div class="card"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#前提"><span class="toc-text">前提</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#IDE"><span class="toc-text">IDE</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#WSLの設定"><span class="toc-text">WSLの設定</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#WSLでJdkをインストール"><span class="toc-text">WSLでJdkをインストール</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#WSL側のVisual-Studio-Codeの拡張機能をインストール"><span class="toc-text">WSL側のVisual Studio Codeの拡張機能をインストール</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#WSL側のVisual-Studio-CodeのProxyを設定"><span class="toc-text">WSL側のVisual Studio CodeのProxyを設定</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MavenのProxy設定"><span class="toc-text">MavenのProxy設定</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Spring-Bootのプロジェクト作成"><span class="toc-text">Spring Bootのプロジェクト作成</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#まとめ"><span class="toc-text">まとめ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#最後に"><span class="toc-text">最後に</span></a></li></ol></div><div class="card home-link"><a class="hover-underline-animation" href="/">&leftarrow; 戻るホーム</a></div></section><section class="article slide-in-right"><div class="loader" id="loader"><svg viewBox="0 0 50 50"><circle class="ring" cx="25" cy="25" r="20"></circle><circle class="ball" cx="25" cy="5" r="3.5"></circle></svg></div><div class="comment" id="utteranc"></div><noscript>Please activate JavaScript for normal use of comments</noscript></section><a class="card back-to-top" id="backTop">&UpArrow;</a></main><script>window.COLD_STONE={root:"/",author:"dongsu",gaid:"UA-148723572-1",repo:"dongsu-iis/dongsu-iis.github.io"}</script><script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.9/highlight.min.js"></script><script>hljs.initHighlightingOnLoad()</script><script src="/scripts/busuanzi.js" referrerpolicy="origin"></script><script src="/scripts/cold-stone.js"></script><script src="//www.googletagmanager.com/gtag/js?id=UA-148723572-1"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config",window.COLD_STONE.gaid)</script></body></html>